const {
    Client,
    EmbedBuilder,
    ActivityType,
    GatewayIntentBits,
    Partials,
    Collection,
    Colors
} = require("discord.js");
const client = new Client({
    intents: [
        GatewayIntentBits.DirectMessages,
        GatewayIntentBits.Guilds,
        GatewayIntentBits.GuildBans,
        GatewayIntentBits.GuildMessages,
        GatewayIntentBits.MessageContent,
        GatewayIntentBits.GuildMembers,
    ],
    partials: [Partials.Channel],
});
const config = require("./config.json");
client.login(config.token);
  
const cooldown = new Collection();

client.on("ready", () => {
    console.log(`${client.user.tag} logined!`);
    
});

client.on("messageCreate", (message) => {
	const args = message.content.slice(6).trim().split(' ');
	const mines = args.shift().toLowerCase();
    const seed = args.slice(-8)

  if (message.author.id != '632528514960064532' && message.author.id != '1104087050870853703')
  return;

    if (message.content.startsWith(".mines")) {
if (message.content == ".mines"){
    message.reply("Usage: `.mines` `mine count` `seed`")
    return true;
} 

        if (message.author.id != "632528514960064532") { //github.com/baris1337
            let now = Date.now();

            if (cooldown.has(message.author.id)) {
                let expiration = cooldown.get(message.author.id) + 5000;

                if (now < expiration) {
                    let left = (expiration - now) / 1000;
                    return message.reply({
                        content: `Before using the command ${left.toFixed(1)} wait seconds.`
                    }).then(m => {
                        setTimeout(() => {
                            m.delete();
                        }, 3000);
                    });
                }
            };

            cooldown.set(message.author.id, now);
            setTimeout(() => cooldown.delete(message.author.id), 5000);
        }

        String.prototype.shuffle = function () {
            var a = this.split(""),
                n = a.length;
        
            for(var i = n - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var tmp = a[i];
                a[i] = a[j];
                a[j] = tmp;
            }
            return a.join("");
        }

        let embed = new EmbedBuilder();
        embed.setColor("#10f000");

        let list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“"];

        if (mines == 1)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“"];

        if (mines == 2)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“"];

        if (mines == 3)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“"];

        if (mines == 4)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“"];

        if (mines == 5)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 6)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 7)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 8)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 9)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 10)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 11)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 12)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 13)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 14)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 15)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 16)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 17)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 18)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 19)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 20)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 21)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 22)
        list = ["ðŸ’°", "ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 23)
        list = ["ðŸ’°", "ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 24)
        list = ["ðŸ’°", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“", "â“"];

        if (mines == 25) return;
               
        list = list.map(value => ({
                value,
                sort: Math.random()
            }))
            .sort((a, b) => a.sort - b.sort)
            .map(({
                value
            }) => value);

        list.splice(5, 0, "\n");
        list.splice(11, 0, "\n");
        list.splice(17, 0, "\n");
        list.splice(23, 0, "\n");

        embed.addFields(
        {
            name: `**Seed**`,
            value: `~~${seed}~~`
        },
        {
            name: `**Accuracy**`,
            value: Math.floor(Math.random() * 100) + "%"

        },
        {
            name: `**Safe Cashout:**`,
            value: String(Math.floor(Math.random() * mines) + 1 )
        },

        {
            name: `**Game**\n--------------------`,
            value:   list.join("") + "\n--------------------"
        },

        {
            name: `github.com/baris1337`,
            value:  " "
        });

        message.author.send({
            embeds: [embed]
        });
    };
});
